{"version":3,"sources":["C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\Bot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\Context.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\CornerMCTSBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\GameMaster.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\JinusiBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\MCTSBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\NStepBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\OneStepBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\RandomBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\Rational.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\SanpuLinesBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\SanpuStationsBot.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\bot\\State.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\Main.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\gomoku\\Board.tonyu"],"names":[],"mappings":"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","sourcesContent":["\r\n\\play(ctx, s:State):Action {\r\n    throw new Error(\"Abstract: メソッドplayが実装されていません\");    \r\n}","var player:Number;\r\nvar players; // Player[]\r\nvar debug:Boolean;","extends Bot;\r\n//https://blog.brainpad.co.jp/entry/2018/04/05/163000\r\nvar Cp;\r\nvar expandThresh;\r\nvar value; // (ctx, player, state)=>number (playerにとってのstateの評価値)\r\nvar iteration;\r\nvar player;\r\nvar timeout;\r\n\"field strict\";\r\n//var rootNode={};\r\n/*Node={\r\n    parent?: Node,\r\n    state:State,\r\n    q: Rational\r\n    n: number,\r\n    actions: Node[]?\r\n}*/\r\nvar expcount=0;\r\n\\expand(ctx:Context, node) {\r\n    /*var sk=s.id();\r\n    if (nodes[sk]) throw new Error(sk+\" already found\");*/\r\n    if (node.n<expandThresh) throw new Error(node.n+\"<\"+expandThresh);\r\n    if (node.subnodes) throw new Error(\"already expanded\");\r\n    expcount++;\r\n    var s:Board = getState(ctx, node);\r\n    node.actions=s.actionsEvents(ctx);\r\n    if(s.diceNum !=null){\r\n        var hasCorner=node.actions.some(isCorner);\r\n    }\r\n    node.subnodes=node.actions.map \\(a) {\r\n        var q,n;\r\n        if(s.diceNum==null){\r\n            q=new Rational(0,0); n=0;\r\n        }else if (!hasCorner) {//角の駅がない場合，全部0にする\r\n            q=new Rational(0,0); n=0;\r\n        } else if (isCorner(a)) {//角の駅なら，得点up&まだ辿っていない\r\n            q=new Rational(5,0); n=0;\r\n        } else {\r\n            q=new Rational(0,0); n=1;//角じゃない駅は「すでにたどった扱い」にすると，辿りにくくなるかも\r\n        }\r\n        //q=new Rational(0,0); n=0;\r\n        return {\r\n            parent: node, \r\n            //state: node.state.next(ctx,a),\r\n            q, \r\n            n, \r\n            //a:str(a),\r\n            //actions: null,\r\n        };\r\n    };\r\n    return node;\r\n}\r\n\\str(s) {\r\n    var r=s+\"\";\r\n    if (r==\"[object Object]\") return s;\r\n    return r;\r\n}\r\n\\c(node, a:Number) {\r\n    var nsa=n(node,a);\r\n    var _n=n(node);\r\n    if (nsa==0 || _n==0) return 1000000-rnd();\r\n    return nanc( Cp*sqrt(2*$Math.log(_n))/nsa );\r\n}\r\n\\q(node, a:Number) {\r\n    if (a==null) {\r\n        return node.q.value;\r\n    } else {\r\n        if (!node.subnodes) throw new Error(\"Not expanded\");\r\n        return node.subnodes[a].q.value;\r\n    }\r\n}\r\n\\n(node, a:Number) {\r\n    if (a==null) {\r\n        return nanc( node.n );\r\n    } else {\r\n        if (!node.subnodes) throw new Error(\"Not expanded\");\r\n        return nanc( node.subnodes[a].n );\r\n    }\r\n}\r\n\\selection(ctx:Context, node) {\r\n    // return leaf node\r\n    if (!node.subnodes) throw new Error(\"Not expanded\");\r\n    while (true) {\r\n        var subs=node.subnodes;\r\n        node.n+=1;\r\n        if (!subs || subs.length==0) break;\r\n        var sgn=(getState(ctx, node).player===player?1:-1);\r\n        var ma=-1,mqc=0,test;\r\n        for (var a=0;a<subs.length;a++) {\r\n            var qc=q(node,a)*sgn+c(node,a);\r\n            subs[a].test=\"q=\"+q(node,a)*sgn+\" c=\"+c(node,a);\r\n            if (ma<0 || qc>=mqc) {\r\n                mqc=qc;\r\n                ma=a;\r\n            }\r\n        }\r\n        //acts[ma].qc=test;\r\n        //acts[ma].n+=1;\r\n        node=subs[ma];\r\n    }\r\n    return node;\r\n}\r\n\\play(ctx:Context, s:State):Action {\r\n    expcount=0;\r\n    var rootNode={\r\n        parent: null, \r\n        state: s,\r\n        q:new Rational(0,0), \r\n        n:expandThresh+1, \r\n        actions: null,\r\n    };\r\n    player=s.player;\r\n    nanc(expandThresh);\r\n    expand(ctx,rootNode);\r\n    for (var i=0;i<iteration;i++) {\r\n        while(true) {\r\n            var leaf=selection(ctx, rootNode);\r\n            if (n(leaf)<expandThresh) break;\r\n            if (leaf.subnodes && leaf.subnodes.length==0) break;\r\n            expand(ctx, leaf);\r\n        }\r\n        // print(\"leaf\", leaf);\r\n        var endState=rollout(ctx, leaf, timeout);\r\n        var v=value(ctx, s.player, endState);\r\n        backup(leaf, v);\r\n        if (expcount>=300) break;\r\n    }\r\n    //print (\"RN\",rootNode);\r\n    var ma=-1,mqc=0;\r\n    for (var a=0;a<rootNode.subnodes.length;a++) {\r\n        var qc=q(rootNode,a);\r\n        //print(\"QC\", a,qc);\r\n        if (ma<0 || qc>=mqc) {\r\n            mqc=qc;\r\n            ma=a;\r\n        }\r\n    }\r\n    var acts=s.actionsEvents(ctx);\r\n    //print (acts.length , rootNode.subnodes.length, ma);\r\n    if (!acts[ma]) throw new Error(\"Action not found \"+ma);\r\n    print(\"EXP\",expcount);\r\n    return acts[ma];\r\n}\r\n\\backup(node, value:Number) {\r\n    while(node) {\r\n        node.q=node.q.inc(value);\r\n        node=node.parent;\r\n    }\r\n}\r\n\\getState(ctx, node){\r\n    if (node.state) return node.state;\r\n    var p=node.parent;\r\n    var idx=p.subnodes.indexOf(node);\r\n    if (idx<0) throw new Error(\"Index not found\");\r\n    var act=p.actions[idx];\r\n    if (!act) throw new Error(\"Action not found \"+idx);\r\n    node.state=getState(ctx, p).next(ctx, act);\r\n    return node.state;\r\n}\r\n\r\n\\rollout(ctx, node, timeout) {\r\n    var state=getState(ctx, node);\r\n    var t=new Date().getTime();\r\n    while (!state.gameover(ctx)) {\r\n        var a=playRandom(ctx, state);\r\n        state=state.next(ctx, a);\r\n        if (new Date().getTime()-t>timeout) break;\r\n    }\r\n    return state;\r\n}\r\n\r\n\\isCorner(a){\r\n    if($stations[a.stext].nexts.length == $stations[a.stext].lines.length){//角の駅かを判定\r\n        return true;//角ならtrue\r\n    }else{\r\n        return false;\r\n    }\r\n}\r\n\r\n\\playRandom(ctx:Context, s:State):Action {\r\n    //ここを角を取る処理に変える\r\n    if (!ctx) throw new Error(\"CTX is null!??\");\r\n    var acts=s.actionsEvents(ctx);\r\n    var a=acts[rnd(acts.length)];\r\n    //var x=3;\r\n    //var a=spraying(acts);\r\n    return a;\r\n}\r\n\\nanc(v) {\r\n    if (typeof v!==\"number\") throw new Error(\"null\");\r\n    if (v!==v) throw new Error(\"Nan\");\r\n    return v;\r\n}\r\n/*\\hasNode(s:State) {\r\n    var sk=s.id();\r\n    return nodes[sk];\r\n}\r\n\\getNode(s:State) {\r\n    var sk=s.id();\r\n    if (!nodes[sk]) throw new Error(sk+\" not found\");\r\n    return nodes[sk];\r\n}*/\r\n/*\r\n\\searchCorner(stationArray){//取られていない角の駅の配列を受け取る\r\n    var biggest=stationArray[0];\r\n    for(var i=1;i<stationArray.length;i++){\r\n        if($stations[biggest].nexts.length < $stations[stationArray[i]].nexts.length){\r\n        //隣接駅数が多ければそちらを最大の角とする\r\n            biggest=stationArray[i];\r\n        }\r\n    }\r\n    return biggest;\r\n}\r\n\r\n\\spraying(acts){\r\n    var choice;\r\n    var stn;\r\n    var kouho=[];\r\n    \r\n    for(stn of acts){\r\n        if($stations[stn.stext].nexts.length == $stations[stn.stext].lines.length){//角の駅かを判定\r\n            kouho.push(stn.stext);//角ならkouhoに追加\r\n        }\r\n    }\r\n    if(kouho.length>0){\r\n        return {stext:searchCorner(shuffle(kouho))};\r\n    }else{\r\n        return acts[rnd(acts.length)];//ランダムを返す\r\n    }\r\n}\r\n\r\n\\shuffle(stArray){//kouhoを受け取る\r\n    var newArray=[];\r\n    var choice;\r\n    var z;\r\n    while(true){\r\n        z=stArray.splice([rnd(stArray.length)],1);\r\n        newArray.push(z[0]);//ランダムな1駅を選び新たな配列の末尾に追加する\r\n        if(stArray.length==0){\r\n            break;\r\n        }\r\n    }\r\n    return newArray;//ランダムな順になった配列を返す\r\n}*/","\r\nvar state;\r\nvar context:Context;\r\n/*\\addPlayerIndex() {\r\n    var idx=0;\r\n    for (var p of context.players) {\r\n        p.index=idx;\r\n        idx++;\r\n    }\r\n}*/\r\n\\onAppear() {\r\n   // addPlayerIndex();\r\n    //state=initial;\r\n}\r\n//var interval=30;\r\n\\step() {\r\n    if (gameover()) throw new Error(\"Game is over\");\r\n    if (state.nextIsEvent(context)) {\r\n        let events=state.actionsEvents(context);\r\n        let rate=rnd(),ratesum=0,selevent;\r\n        for (let event of events) {\r\n            if (typeof event.prob!==\"number\") throw new Error(\"prob is not set\");\r\n            ratesum+=event.prob;\r\n            if (rate<ratesum) {selevent=event;break;}\r\n        }\r\n        if (!selevent) throw new Error(\"Event is not selected\");\r\n        state=state.next(context,selevent);\r\n        if (!state) throw new Error(\"state is null!\");\r\n        return selevent;\r\n    } else {\r\n        let action=getBot(state.player).play(context, state);\r\n        state=state.next(context, action);\r\n        if (!state) throw new Error(\"state is null!\");\r\n        return action;\r\n    }\r\n}\r\n\\getBot(p:Number) {\r\n    //if (p.bot) return p.bot;\r\n    if (context.bots && context.bots[p]) return context.bots[p];\r\n    throw new Error(\"Bot not found: \"+p);\r\n}\r\n\\gameover() {\r\n    return state.gameover(context);\r\n}\r\n\\run() {\r\n    while(!gameover()) {\r\n        step();\r\n        print(state+\"\");\r\n    }\r\n}\r\n/*while(!state.gameover()) {\r\n    var action=state.player.bot.play(context, state);\r\n    state=state.next(context, action);\r\n    if (!state) throw new Error(\"state is null!\");\r\n    print(state+\"\");\r\n    if (interval) updateEx(interval);\r\n}*/\r\n//print(state);\r\n\r\n","extends Bot;\r\n\r\n\\play(ctx:Context, s:State):Action {\r\n    if (!ctx) throw new Error(\"CTX is null\");\r\n    var acts=s.actionsEvents(ctx);//取得可能な全ての駅のリスト\r\n    // todo: Event\r\n    var a=spread(acts);\r\n    return a;\r\n}\r\n\r\n\\searchCorner(stationArray){//取られていない角の駅の配列を受け取る\r\n    var biggest=stationArray[0];\r\n    for(var i=1;i<stationArray.length;i++){\r\n        if($stations[biggest].nexts.length < $stations[stationArray[i]].nexts.length){\r\n        /*隣接駅数が多ければそちらを最大の角とする*/\r\n            biggest=stationArray[i];\r\n        }\r\n    }\r\n    return biggest;\r\n}\r\n\\spread(acts){\r\n    //じわじわ広げる\r\n    \r\n}\r\n\\spraying(acts){\r\n    var choice;\r\n    var stn;\r\n    var kouho=[];\r\n    \r\n    for(stn of acts){\r\n        if($stations[stn.stext].nexts.length == $stations[stn.stext].lines.length && $stations[stn.stext].midway!=true){//角の駅かを判定\r\n            kouho.push(stn.stext);//角ならkouhoに追加\r\n        }\r\n    }\r\n    if(kouho.length>0){\r\n        return {stext:searchCorner(shuffle(kouho))};\r\n    }else{\r\n        return acts[rnd(acts.length)];//ランダムを返す\r\n    }\r\n}\r\n\r\n\\shuffle(stArray){//kouhoを受け取る\r\n    var newArray=[];\r\n    var choice;\r\n    var z;\r\n    while(true){\r\n        z=stArray.splice([rnd(stArray.length)],1);\r\n        newArray.push(z[0]);//ランダムな1駅を選び新たな配列の末尾に追加する\r\n        if(stArray.length==0){\r\n            break;\r\n        }\r\n    }\r\n    return newArray;//ランダムな順になった配列を返す\r\n}","extends Bot;\r\n//https://blog.brainpad.co.jp/entry/2018/04/05/163000\r\nvar Cp;\r\nvar expandThresh;\r\nvar value; // (ctx, player, state)=>number (playerにとってのstateの評価値)\r\nvar iteration;\r\nvar player;\r\nlet timeout;\r\nlet timeoutCount=0;\r\nlet expcount=0;\r\n//var rootNode={};\r\n/*Node={\r\n    parent?: Node,\r\n    state:State,\r\n    q: Rational\r\n    n: number,\r\n    subnodes: Node[]?\r\n}*/\r\n\\expand(ctx:Context, node) {\r\n    /*var sk=s.id();\r\n    if (nodes[sk]) throw new Error(sk+\" already found\");*/\r\n    if (node.n<expandThresh) throw new Error(node.n+\"<\"+expandThresh);\r\n    if (node.subnodes) throw new Error(node.state+\" already expanded\");\r\n    node.subnodes=node.state.actionsEvents(ctx).map \\(a) {\r\n        return {\r\n            parent: node, \r\n            state: node.state.next(ctx,a),\r\n            q:new Rational(0,0), \r\n            n:0, \r\n            a:str(a),\r\n            subnodes: null,\r\n        };\r\n    };\r\n    expcount++;\r\n    return node;\r\n}\r\n\\str(s) {\r\n    var r=s+\"\";\r\n    if (r==\"[object Object]\") return s;\r\n    return r;\r\n}\r\n\\c(node, a:Number) {\r\n    var nsa=n(node,a);\r\n    var _n=n(node);\r\n    if (nsa==0 || _n==0) return 1000000-rnd();\r\n    return nanc( Cp*sqrt(2*$Math.log(_n))/nsa );\r\n}\r\n\\q(node, a:Number) {\r\n    if (a==null) {\r\n        return node.q.value;\r\n    } else {\r\n        if (!node.subnodes) throw new Error(n.state+\"Not expanded\");\r\n        return node.subnodes[a].q.value;\r\n    }\r\n}\r\n\\n(node, a:Number) {\r\n    if (a==null) {\r\n        return nanc( node.n );\r\n    } else {\r\n        if (!node.subnodes) throw new Error(n.state+\"Not expanded\");\r\n        return nanc( node.subnodes[a].n );\r\n    }\r\n}\r\n\\selection(ctx:Context, node) {\r\n    // return leaf node\r\n    if (!node.subnodes) throw new Error(n.state+\"Not expanded\");\r\n    while (true) {\r\n        var acts=node.subnodes;\r\n        var sgn=(node.state.player===player?1:-1);\r\n        node.n+=1;\r\n        if (!acts || acts.length==0) break;\r\n        var ma=-1,mqc=0,test;\r\n        for (var a=0;a<acts.length;a++) {\r\n            let qq=q(node,a);\r\n            var qc=qq*sgn+c(node,a);\r\n            acts[a].test=\"q=\"+q(node,a)*sgn+\" c=\"+c(node,a);\r\n            if (ma<0 || qc>=mqc) {\r\n                mqc=qc;\r\n                ma=a;\r\n            }\r\n        }\r\n        //acts[ma].qc=test;\r\n        //acts[ma].n+=1;\r\n        node=acts[ma];\r\n    }\r\n    return node;\r\n}\r\n\\play(ctx:Context, s:State):Action {\r\n    expcount=0;\r\n    timeoutCount=0;\r\n    var rootNode={\r\n        parent: null, \r\n        state: s,\r\n        q:new Rational(0,0), \r\n        n:expandThresh+1, \r\n        subnodes: null,\r\n    };\r\n    player=s.player;\r\n    nanc(expandThresh);\r\n    expand(ctx,rootNode);\r\n    for (var i=0;i<iteration;i++) {\r\n        while(true) {\r\n            var leaf=selection(ctx, rootNode);\r\n            if (n(leaf)<expandThresh) break;\r\n            if (leaf.subnodes && leaf.subnodes.length==0) break;\r\n            expand(ctx, leaf);\r\n        }\r\n        // print(\"leaf\", leaf);\r\n        var endState=rollout(ctx, leaf, timeout);\r\n        var v=value(ctx, s.player, endState);\r\n        backup(leaf, v);\r\n        if (expcount>=300) break;\r\n    }\r\n    //print (\"RN\",rootNode);\r\n    var ma=-1,mqc=0;\r\n    for (var a=0;a<rootNode.subnodes.length;a++) {\r\n        var qc=q(rootNode,a);\r\n        //print(\"QC\", a,qc);\r\n        if (ma<0 || qc>=mqc) {\r\n            mqc=qc;\r\n            ma=a;\r\n        }\r\n    }\r\n    var acts=s.actionsEvents(ctx);\r\n    //print (acts.length , rootNode.subnodes.length, ma);\r\n    if (!acts[ma]) throw new Error(\"Action not found \"+ma);\r\n    print(\"EXP\",expcount,\" TO\",timeoutCount);\r\n    return acts[ma];\r\n}\r\n/*\\play(ctx:Context, s:State):Action {\r\n    var rootNode={\r\n        parent: null, \r\n        state: s,\r\n        q:new Rational(0,0), \r\n        n:expandThresh+1, \r\n        subnodes: null,\r\n    };\r\n    player=s.player;\r\n    nanc(expandThresh);\r\n    expand(ctx,rootNode);\r\n    for (var i=0;i<iteration;i++) {\r\n        while(true) {\r\n            var leaf=selection(ctx, rootNode);\r\n            if (n(leaf)<expandThresh) break;\r\n            if (leaf.subnodes && leaf.subnodes.length==0) break;\r\n            expand(ctx, leaf);\r\n        }\r\n        // print(\"leaf\", leaf);\r\n        var endState=rollout(ctx, leaf);\r\n        var v=value(ctx, s.player, endState);\r\n        backup(leaf, v);\r\n    }\r\n    //print (\"RN\",rootNode);\r\n    var ma=-1,mqc=0;\r\n    for (var a=0;a<rootNode.subnodes.length;a++) {\r\n        var qc=q(rootNode,a);\r\n        //print(\"QC\", a,qc);\r\n        if (ma<0 || qc>=mqc) {\r\n            mqc=qc;\r\n            ma=a;\r\n        }\r\n    }\r\n    var acts=s.actionsEvents(ctx);\r\n    //print (acts.length , rootNode.subnodes.length, ma);\r\n    if (!acts[ma]) throw new Error(\"Action not found \"+ma);\r\n    return acts[ma];\r\n}\r\n*/\r\n\\backup(node, value:Number) {\r\n    while(node) {\r\n        node.q=node.q.inc(value);\r\n        node=node.parent;\r\n    }\r\n}\r\n\r\n\\rollout(ctx, node, timeout) {\r\n    var state=getState(ctx, node);\r\n    var t=new Date().getTime();\r\n    while (!state.gameover(ctx)) {\r\n        var a=playRandom(ctx, state);\r\n        state=state.next(ctx, a);\r\n        if (new Date().getTime()-t>timeout) {timeoutCount++;break;}\r\n    }\r\n    return state;\r\n}\r\n\r\n\\getState(ctx, node){\r\n    if (node.state) return node.state;\r\n    var p=node.parent;\r\n    var idx=p.subnodes.indexOf(node);\r\n    if (idx<0) throw new Error(\"Index not found\");\r\n    var act=p.subnodes[idx];\r\n    if (!act) throw new Error(\"Action not found \"+idx);\r\n    node.state=getState(ctx, p).next(ctx, act);\r\n    return node.state;\r\n}\r\n\r\n\\playRandom(ctx:Context, s:State):Action {\r\n    if (!ctx) throw new Error(\"CTX is null\");\r\n    var acts=s.actionsEvents(ctx);\r\n    var a=acts[rnd(acts.length)];\r\n    return a;\r\n}\r\n\\nanc(v) {\r\n    if (typeof v!==\"number\") throw new Error(\"null\");\r\n    if (v!==v) throw new Error(\"Nan\");\r\n    return v;\r\n}\r\n/*\\hasNode(s:State) {\r\n    var sk=s.id();\r\n    return nodes[sk];\r\n}\r\n\\getNode(s:State) {\r\n    var sk=s.id();\r\n    if (!nodes[sk]) throw new Error(sk+\" not found\");\r\n    return nodes[sk];\r\n}*/","extends Bot;\r\n//n手先読み\r\nvar n:Number;\r\nvar value; // (ctx, player, state)=>number (playerにとってのstateの評価値)\r\n\\play(ctx, s:State):Action {\r\n    var a=playN(ctx,s,n);\r\n    if (!a[0]) {\r\n        throw new Error(\"Action is null 2! \"+n);\r\n    }\r\n    return a[0];\r\n}\r\n\\playN(ctx, s:State, n:Number)/*Action[]*/ {\r\n    if (n<=0) return [];\r\n    if (!ctx) throw new Error(\"CTX is null\");\r\n    var acts=s.actionsEvents(ctx);\r\n    if (acts.length==0) return [];\r\n    var player=s.player;\r\n    // todo: Event\r\n    var maxv=-100, besta;\r\n    //print(\"from \"+s);\r\n    var acvs=acts.map \\(a:Action) {\r\n        var ns=s.next(ctx, a);\r\n        var sa=playN(ctx,ns,n-1);\r\n        for (var ae of sa) {\r\n            ns=ns.next(ctx,ae);\r\n        }\r\n        var v=value(ctx, player, ns);\r\n        return {value:v, actions:[a].concat(sa)};        \r\n    };\r\n    acvs.sort \\{return rnd()-0.5;};\r\n    acvs.sort \\(a,b){return b.value-a.value;};\r\n    /*if (!acvs[0].actions[0]) {\r\n        print(acvs);\r\n        throw new Error(\"Action is null!\");\r\n    }*/\r\n    return acvs[0].actions;\r\n}\r\n","extends Bot;\r\n//1手だけ先読み\r\nvar value; // (ctx, player, state)=>number (playerにとってのstateの評価値)\r\n\\play(ctx, s:State):Action {\r\n    if (!ctx) throw new Error(\"CTX is null\");\r\n    var acts=s.actionsEvents(ctx);\r\n    var player=s.player;\r\n    // todo: Event\r\n    var maxv=-100, besta;\r\n    //print(\"from \"+s);\r\n    var acvs=acts.map \\(a:Action) {\r\n        var ns=s.next(ctx, a);\r\n        var v=value(ctx, player, ns);\r\n        return {value:v, action:a};        \r\n    };\r\n    acvs.sort \\{return rnd()-0.5;};\r\n    acvs.sort \\(a,b){return b.value-a.value;};\r\n    if (!acvs[0].action) {\r\n        print(acvs);\r\n        throw new Error(\"Action is null!\");\r\n    }\r\n    return acvs[0].action;\r\n}\r\n","extends Bot;\r\n\r\n\\play(ctx:Context, s:State):Action {\r\n    if (!ctx) throw new Error(\"CTX is null\");\r\n    var acts=s.actionsEvents(ctx);\r\n    // todo: Event\r\n    var a=acts[rnd(acts.length)];\r\n    return a;\r\n}\r\n","extends TObject;\r\nvar q,n;\r\n\\new(q,n) {\r\n    this.q=q;\r\n    this.n=n;\r\n}\r\n\\inc(qby:Number) {\r\n    return new Rational(q+qby,n+1);\r\n}\r\n\\value {\r\n    if (n==0) return 0;\r\n    return nanc(q/n);\r\n}\r\n\\nanc(v) {\r\n    if (v!==v) throw new Error(q+\" / \"+n);\r\n    return v;\r\n}","extends Bot;\r\n\r\n\\play(ctx:Context, s:State):Action {\r\n    if (!ctx) throw new Error(\"CTX is null\");\r\n    var acts=s.actionsEvents(ctx);\r\n    // todo: Event\r\n    var a=spraying(acts);\r\n    return a;\r\n}\r\n\r\n\\searchCorner(stationArray){//取られていない角の駅の配列を受け取る\r\n    var biggest=stationArray[0];\r\n    for(var i=1;i<stationArray.length;i++){\r\n        if($stations[biggest].nexts.length < $stations[stationArray[i]].nexts.length){\r\n        /*隣接駅数が多ければそちらを最大の角とする*/\r\n            biggest=stationArray[i];\r\n        }\r\n    }\r\n    return biggest;\r\n}\r\n\r\n\\spraying(acts){\r\n    var choice;\r\n    var stn;\r\n    var kouho=[];\r\n    \r\n    for(stn of acts){\r\n        if($stations[stn.stext].nexts.length == $stations[stn.stext].lines.length && $stations[stn.stext].midway!=true){//角の駅かを判定\r\n            kouho.push(stn.stext);//角ならkouhoに追加\r\n        }\r\n    }\r\n    if(kouho.length>0){\r\n        return {stext:searchCorner(shuffle(kouho))};\r\n    }else{\r\n        return acts[rnd(acts.length)];//ランダムを返す\r\n    }\r\n}\r\n\r\n\\shuffle(stArray){//kouhoを受け取る\r\n    var newArray=[];\r\n    var choice;\r\n    var z;\r\n    while(true){\r\n        z=stArray.splice([rnd(stArray.length)],1);\r\n        newArray.push(z[0]);//ランダムな1駅を選び新たな配列の末尾に追加する\r\n        if(stArray.length==0){\r\n            break;\r\n        }\r\n    }\r\n    return newArray;//ランダムな順になった配列を返す\r\n}","extends Bot;\r\n\r\n\\play(ctx:Context, s:State):Action {\r\n    if (!ctx) throw new Error(\"CTX is null\");\r\n    var acts=s.actionsEvents(ctx);\r\n    // todo: Event\r\n    var a=spraying(acts);\r\n    return a;\r\n}\r\n\r\n\\searchCorner(stationArray){//取られていない角の駅の配列を受け取る\r\n    var max=stationArray[0];\r\n    for(var i=1;i<stationArray.length;i++){\r\n        if(linesAllStations(max) < linesAllStations(stationArray[i])){\r\n        /*その駅が所属する路線の総駅数が多ければそちらを最大の角とする*/\r\n            max=stationArray[i];\r\n        }\r\n    }\r\n    return max;\r\n}\r\n\r\n\\spraying(acts){\r\n    var choice;\r\n    var stn;\r\n    var kouho=[];\r\n    \r\n    for(stn of acts){\r\n        if($stations[stn.stext].nexts.length == $stations[stn.stext].lines.length && $stations[stn.stext].midway!=true){//角の駅かを判定\r\n            kouho.push(stn.stext);//角ならkouhoに追加\r\n        }\r\n    }\r\n    if(kouho.length>0){\r\n        return {stext:searchCorner(shuffle(kouho))};\r\n    }else{\r\n        return acts[rnd(acts.length)];//ランダムを返す\r\n    }\r\n}\r\n\r\n\\shuffle(stArray){//kouhoを受け取る\r\n    var newArray=[];\r\n    var choice;\r\n    var z;\r\n    while(true){\r\n        z=stArray.splice([rnd(stArray.length)],1);\r\n        newArray.push(z[0]);//ランダムな1駅を選び新たな配列の末尾に追加する\r\n        if(stArray.length==0){\r\n            break;\r\n        }\r\n    }\r\n    return newArray;//ランダムな順になった配列を返す\r\n}\r\n\r\n\\linesAllStations(stationName){\r\n    var sum=0;\r\n    var sLines=$stations[stationName].lines;\r\n    for(var i=0;i<sLines.length;i++){\r\n        for (var station of $stationPlace) {\r\n            //接続駅が選ばれた場合、同じ駅を重複して数えている\r\n            //あえてこのままにするのも手かもしれない\r\n            if($stations[station.name].lines.indexOf(sLines[i])>-1){\r\n                sum+=1;\r\n            }\r\n        }\r\n    }\r\n    return sum;\r\n}","extends TObject;\r\nincludes EventMod;\r\nnative console;\r\n\\print(p) {\r\n    var cp=$consolePanel;\r\n    console.log.apply(console,arguments);\r\n    //cp.print.apply(cp, arguments);\r\n}\r\n//一度作成したStateオブジェクトの変数の内容を書き換えないようにしてください．\r\n// nextメソッドでは，新しく作成したStateオブジェクトを返してください．\r\n\r\nvar player:Number;//この盤面の次にプレイするプレイヤー\r\n// prevState, prevActionはなし．違う動作で同じStateに至る場合もあるので．\r\n\r\n\\next(ctx:Context, a:Action):State {\r\n    //a:Action|Event\r\n    throw new Error(\"Abstract: メソッドnextが実装されていません\");    \r\n}\r\n\r\n\\actionsEvents(ctx:Context) {\r\n    //: Action[] | Event[] \r\n    // Action:プレイヤーがとる行動\r\n    // Event :ランダムに起きる事象（サイコロなど）\r\n    // Eventオブジェクトにはフィールドprob(確率を表す0..1の数値)を含め，\r\n    // Event配列のprobの合計値が1になるようにしてください\r\n    // ActionとEventを混ぜて返すことはできません．\r\n    // 常に同じ順序で同じものを返してください\r\n    throw new Error(\"Abstract: メソッドactionsEventsが実装されていません\");    \r\n}\r\n\\gameover(ctx:Context) {\r\n    return actionsEvents(ctx).length==0;\r\n    //throw new Error(\"Abstract: メソッドgameoverが実装されていません\");    \r\n}\r\n\\id(ctx) {\r\n    throw new Error(\"Abstract: メソッドidが実装されていません\");    \r\n}\r\n\\playerIndex(ctx, p) {\r\n    return ctx.players.indexOf(p);    \r\n}\r\n\\nextIsEvent(ctx:Context) {\r\n    return false;\r\n}\r\n","//$Screen.resize(200,600);\r\nlet bots=[];\r\n\\value(ctx:Context, player: Number, state:Board) {\r\n    let acts=state.actionsEvents(ctx);\r\n    if (acts.length===0) {\r\n        if (player===state.player) return 0;\r\n        else return 1;\r\n    }\r\n    let win=state.gameover(ctx);\r\n    if (!win) {\r\n        return 0.5;\r\n    } else if (player===win) {\r\n        return 1;\r\n    } else {\r\n        return 0;\r\n    }\r\n    \r\n}\r\nlet logf=file(\"log.txt\");\r\nlet its=[30,300,3000];\r\nlet it1=10000,it2=5000;//rnd(2000,6000),it2=rnd(2000,6000);\r\nlet to1=10,to2=10;//rnd()*10+2.1, to2=rnd()*10+2.1;\r\nlet tt1=rnd(1000,5000), tt2=rnd(1000,5000) ;\r\nlet komas;\r\nfor (let i=0;i<100;i++) {\r\n    print(\"Match no. \",i);\r\n    match();   \r\n}\r\n\\match() {\r\n    print(\"iters:\" ,it1, it2);\r\n    //print(\"totaltimes:\", tt1, tt2);\r\n    //print(\"timeouts:\", to1, to2);\r\n    bots[1]=new MCTSBot{Cp:1,expandThresh: 3, value, totalTime: tt1, timeout:to1, iteration:it1};\r\n    bots[2]=new MCTSBot{Cp:1,expandThresh: 3, value, totalTime: tt2, timeout:to2, iteration:it2};\r\n    let context=new Context{players:[1,2], bots};\r\n    let mat=new Matrix;\r\n    let r=10;\r\n    for (let i=0;i<r;i++) {\r\n        for (let j=0;j<r;j++) {\r\n            mat.set(j,i,0);\r\n        }\r\n    }\r\n    mat.set(floor(r/2),floor(r/2),2);\r\n    let player=1;\r\n    let state=new Board{mat,player};\r\n    let g=new GameMaster{context, state};\r\n    print(g.state+\"\");\r\n    let winner=0;\r\n    while (!(winner=g.gameover())) {\r\n        let a=g.step();\r\n        print(a.x, a.y, a.dx, a.dy);\r\n        print(g.state+\"\");\r\n        print(value(context, g.state.player, g.state ));\r\n        updateEx(1);\r\n    }\r\n    //print(it1, it2);\r\n    print(tt1, to1, tt2, to2);\r\n    print(\"winner is \",winner);\r\n    logf.appendText(tt1+\",\"+to1+\",\"+tt2+\",\"+to2+\",\"+winner+\"\\n\");\r\n    /*\r\n    logf.appendText(it1+\",\"+it2+\",\"+g.state.player+\"\\n\");\r\n    if (g.state.player==1) {\r\n        it1+=rnd(100,200);\r\n        it2-=rnd(100,200);\r\n    } else {\r\n        it1-=rnd(100,200);\r\n        it2+=rnd(100,200);\r\n    }\r\n    it1=rnd(1000,4000);it2=rnd(1000,4000);*/\r\n    /*tt1=rnd(1000,5000); tt2=rnd(1000,5000) ;\r\n    to1=rnd()*10+0.1; to2=rnd()*10+0.1;*/\r\n}\r\n","extends State;\r\n\r\nlet mat:Matrix; // 0 あき  1 白 2 黒\r\nlet player:Number;\r\n\\next(ctx:Context, a):State {\r\n    //a:Action|Event\r\n    let nm=mat.clone();\r\n    nm.set(a.x,a.y,player);\r\n    let foe=3-player;\r\n    return new Board{mat:nm, player:foe};\r\n}\r\n\r\n\\actionsEvents(ctx:Context) {\r\n    //: Action[] | Event[] \r\n    // Action:プレイヤーがとる行動\r\n    // Event :ランダムに起きる事象（サイコロなど）\r\n    // Eventオブジェクトにはフィールドprob(確率を表す0..1の数値)を含め，\r\n    // Event配列のprobの合計値が1になるようにしてください\r\n    // ActionとEventを混ぜて返すことはできません．\r\n    // 常に同じ順序で同じものを返してください\r\n    let res=[];\r\n    let kings=0;\r\n    for (let x,y,p of mat) {\r\n        if (p===0) res.push{x,y};\r\n    }\r\n    return res;\r\n}\r\n\\gameover(ctx:Context) {\r\n    for (let x,y,p of mat) {\r\n        if (p!==0 && checkCon(x,y,p)) return p;\r\n    }\r\n    return actionsEvents(ctx).length==0;\r\n    //throw new Error(\"Abstract: メソッドgameoverが実装されていません\");    \r\n}\r\n\\checkCon(x,y,p) {\r\n    for (let vy=-1;vy<=1;vy++) {\r\n        for (let vx=-1;vx<=1;vx++) {\r\n            if (vx==0&&vy==0)continue;\r\n            if (checkConDir(x,y,vx,vy,p)) return p;\r\n        }        \r\n    }\r\n    return false;\r\n}\r\n\\checkConDir(x,y,vx,vy,p) {\r\n    for (let i=0;i<5;i++) {\r\n        if (mat.get(x,y)!=p) return false;\r\n        x+=vx;\r\n        y+=vy;\r\n    }\r\n    return p;\r\n}\r\n\r\n\\toString() {\r\n    let buf=\"\",py=0;\r\n    for (let x,y,p of mat) {\r\n        if (y!=py) buf+=\"\\n\";\r\n        py=y;\r\n        buf+=p+\" \";\r\n    }\r\n    buf+=\"\\n\"+\"Player \"+player;\r\n    return buf;\r\n}\r\n"]}