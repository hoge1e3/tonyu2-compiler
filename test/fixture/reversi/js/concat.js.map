{"version":3,"sources":["C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\reversi\\Board.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\reversi\\Main.tonyu","C:\\bin\\Dropbox\\workspace\\tonyu2-compiler\\test\\fixture\\reversi\\Test.tonyu"],"names":[],"mappings":"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","sourcesContent":["extends State;\r\n\r\nlet mat:Matrix; // List of 0 あき(なし) 1 白　2 黒   \r\nlet player:Number;\r\nlet changed:Boolean;\r\nlet foePassed:Boolean;\r\n//let cnt:Number;//ターン\r\n\\next(ctx:Context, a):State {\r\n    //a:Action\r\n    let nm=cloneMat();\r\n    let foe=3-player;\r\n    if (a.pass) {\r\n        return new Board{mat:nm, player:foe, foePassed:true};\r\n    }\r\n    nm.set(a.x, a.y, player);\r\n    let changed=false;\r\n    let vs=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]];\r\n    for (let v of vs) {\r\n        let dx=v[0],dy=v[1];\r\n        if (!dx && !dy) throw new Error(\" dx dy \"+dx+\",\"+dy);\r\n        let x=a.x+dx, y=a.y+dy;\r\n        if (typeof x!==\"number\" || typeof y!==\"number\")throw new Error(\" x y \"+x+\",\"+y);\r\n        let c=0;\r\n        while(true) {\r\n            //c++;\r\n            //if (c>100) throw new Error(c);\r\n            if (x<0||x>=8||y<0||y>=8) break;\r\n            let g=nm.get(x,y);\r\n            /*if (c>90) {\r\n                print(player, foe, g,x,y,dx,dy);\r\n            } */ \r\n            if (g==0) {\r\n                break;\r\n            }else if (g==player) {\r\n                x-=dx;\r\n                y-=dy;    \r\n                while(x!=a.x || y!=a.y) {\r\n                    if (x<0||x>=8||x<0||y>=8) throw new Error(\"g!?=\"+x+\",\"+y);\r\n                    nm.set(x,y,player);\r\n                    x-=dx;\r\n                    y-=dy;    \r\n                    changed=true;\r\n                }\r\n                break;\r\n            }else if (g==foe) {\r\n                x+=dx;\r\n                y+=dy;    \r\n            } else {\r\n                throw new Error(\"g!?=\"+g);\r\n            }\r\n        }        \r\n    }\r\n    return new Board{mat:nm, player:foe, changed, foePassed:false};\r\n}\r\n\\cloneMat() {\r\n    let nm=mat.clone();\r\n    /*for (let x,y,p in nm) {\r\n        nm.set(x,y,p.slice());\r\n    }*/\r\n    return nm;\r\n}\r\n\r\n\\actionsEvents(ctx:Context) {\r\n    //: Action[] | Event[] \r\n    // Action:プレイヤーがとる行動\r\n    // Event :ランダムに起きる事象（サイコロなど）\r\n    // Eventオブジェクトにはフィールドprob(確率を表す0..1の数値)を含め，\r\n    // Event配列のprobの合計値が1になるようにしてください\r\n    // ActionとEventを混ぜて返すことはできません．\r\n    // 常に同じ順序で同じものを返してください\r\n    let res=[];\r\n    for (let y=0;y<8;y++) {\r\n        for (let x=0;x<8;x++) {\r\n            if (mat.get(x,y)!=0) continue;\r\n            res.push{x,y};\r\n        }\r\n    }\r\n    if (!ctx.free) {\r\n        res=res.filter \\(a) {\r\n            return next(ctx,a).changed;\r\n        };\r\n        if (res.length==0 && !foePassed) {\r\n            res.push{pass:true};\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\\gameover(ctx:Context) {\r\n    if (actionsEvents(ctx).length==0) {\r\n        let c1=0,c2=0;\r\n        for (let x,y,p of mat) {\r\n            if (p==1) c1++;\r\n            if (p==2) c2++;\r\n        }\r\n        if (c1>c2) return 1;\r\n        if (c2>c1) return 2;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\\toString() {\r\n    let buf=\"\",py=0;\r\n    for (let x,y,p of mat) {\r\n        if (y!=py) buf+=\"\\n\";\r\n        py=y;\r\n       // if (!p.map) throw new Error(`Not ary ${x},${y}`);\r\n        let pp=(p==0 ? \"-\": p);\r\n        if (pp==null) throw new Error(\"Why undef? p.length=\"+p.length);\r\n        buf+=pp+\" \";\r\n    }\r\n    //buf+=\"\\nHaving: \"+having;\r\n    buf+=\"\\n\"+\"Player \"+player;\r\n    return buf;\r\n}\r\n","native process;\r\n\"field strict\";\r\nif (process.argv[1]==\"--expose-gc\") process.argv.shift();\r\n//                                              4    5   6  7     8    9  10    11             12\r\n// node index.js test\\fixture\\gobblet_b\\   -r mcts 100 2  mcts  1000 2  1234  replayFile.txt 10\r\nif(!process.argv[10]){\r\n    throw new Error(\"ゲーム実行回数が入力されていません！\");\r\n}\r\nvar player1 = {name:process.argv[4],iteration:process.argv[5],timeout:process.argv[6]};\r\nvar player2 = {name:process.argv[7],iteration:process.argv[8],timeout:process.argv[9]};\r\nprint(player1);\r\nprint(player2);\r\n\\randomRange(rstr) {\r\n    let p=/^([\\.\\d]+)-([\\.\\d]+)$/;\r\n    let m=p.exec(rstr);\r\n    if (!m) return Number(rstr);\r\n    return rnd(m[2]-m[1])+(m[1]-0);\r\n}\r\n\\botParameter(player){\r\n    var bot;\r\n    if(player.name == \"mcts\"){\r\n        bot = new MCTSBot{value,Cp:10, expandThresh:3, iteration:randomRange(player.iteration), timeout:randomRange(player.timeout)};\r\n    }else if(player.name == \"cmcts\"){\r\n        //bot = new CornerMCTSBot{value,Cp:10, expandThresh:3, iteration:randomRange(player.iteration), timeout:randomRange(player.timeout)};\r\n    }else{\r\n        throw new Error(\"bot:\",bot);\r\n    }\r\n    return bot;\r\n}\r\n\r\n\\value(ctx:Context, player: Number, state:Board) {\r\n    /*let acts=state.actionsEvents(ctx);\r\n    if (acts.length===0) {\r\n        if (player===state.player) return 0;\r\n        else return 1;\r\n    }*/\r\n    let win=state.gameover(ctx);\r\n    if (!win || win===true ) {\r\n        return 0.5;\r\n    } else if (player===win) {\r\n        return 1;\r\n    } else {\r\n        return 0;\r\n    }\r\n    \r\n}\r\n\r\n\r\nlet replayFile=process.argv[11];\r\nif(replayFile){//リプレイtrueの時\r\n    update();\r\n    for (let mt=0;mt<process.argv[10]-0 ;mt++) {\r\n        let bots=[0, botParameter(player1), botParameter(player2)];\r\n        let context=new Context{players:[1,2], bots};\r\n        let state=initialState(context);\r\n        let replay = new Replay{state, context, logFile: replayFile };\r\n        let turn=process.argv[12];\r\n        print(replay.state+\"\");\r\n        for (let i=0;i<turn;i++) {\r\n            replay.step();\r\n            print(replay.state+\"\");\r\n        }\r\n        let acts=replay.state.actionsEvents(context);\r\n        for (let act of acts) {\r\n            let nr=replay.actionModified(act);\r\n            //let bot=bots[ns.player];\r\n            //let sns=replay.play1(bot);//,context,replay.state, replay.state.player);\r\n            match(context, nr.state, nr);\r\n        }\r\n    }\r\n} else {\r\n    for (let i=0;i<process.argv[10]-0 ;i++) {\r\n        let bots=[0, botParameter(player1), botParameter(player2)];\r\n        let context=new Context{players:[1,2], bots};\r\n        let state=initialState(context);\r\n        match(context, state);   \r\n    }\r\n}\r\n\\dump(bot,context,state,player) {\r\n    bot.play(context, state);\r\n    print (state+\"\");\r\n    let lastNode=bot.lastRootNode;\r\n    let lastActions=bot.lastActions;\r\n    if (lastNode && lastActions) {\r\n        let sns=[];\r\n        for (let a=0;a<lastNode.subnodes.length;a++) {\r\n            let qc=bot.q(lastNode,a);\r\n            let ns=state.next(context, lastActions[a]);\r\n            let sn=lastNode.subnodes[a];\r\n            //sn.push{action:lastActions[a],qc, q:sn.q+\"\", n:sn.n};\r\n            sns.push{action:lastActions[a],qc, q:sn.q+\"\", n:sn.n, ns:ns+\" gov=\"+ns.gameover(),\r\n            value: value(context, player, ns)};\r\n        }\r\n        sns.sort \\(a,b) {\r\n            return b.qc-a.qc;\r\n        };\r\n        print(sns);\r\n    }\r\n}\r\n\\initialState(context) {\r\n    let mat=new Matrix;\r\n    let r=8;\r\n    for (let i=0;i<r;i++) {\r\n        for (let j=0;j<r;j++) {\r\n            mat.set(j,i,0);\r\n        }\r\n    }\r\n    mat.set(3,3,1);\r\n    mat.set(4,4,1);\r\n    mat.set(3,4,2);\r\n    mat.set(4,3,2);\r\n    let player=1;\r\n    let state=new Board{\r\n        mat,player,\r\n    };\r\n    return state;\r\n}\r\n\\match(context,state,replay) {    \r\n    let bots=context.bots;\r\n    let logger=new Logger{replay,bots};\r\n    let g=new GameMaster{context, state, logger};\r\n    print(g.state+\"\");\r\n    let winner=0;\r\n    while (!(winner=g.gameover())) {\r\n        let a=g.step();\r\n        print($JSON.stringify(a));\r\n        print(g.state+\"\");\r\n        print(value(context, g.state.player, g.state ));\r\n        \r\n        updateEx(1);\r\n    }\r\n    print(\"winner is \",winner);\r\n    logger.add(\"Winner: \"+winner);\r\n    //updateEx(60);\r\n    \r\n}\r\n","let mat=new Matrix;\r\nlet r=3;\r\nfor (let i=0;i<r;i++) {\r\n    for (let j=0;j<r;j++) {\r\n        mat.set(j,i,[]);\r\n    }\r\n}\r\nmat.set(0,0,[3,5]);\r\nmat.set(1,0,[5]);\r\nmat.set(2,0,[6]);\r\nlet player=1;\r\nlet state=new Board{mat,player,having:[1,1,2,2,3,3,4,4,5,5,6,6],cnt:0,\r\n    lastPut:[0,0,0]\r\n};\r\n\r\n/*print(state.getPlayer(state.getTop(0,0)));\r\nprint(state.getPlayer(state.getTop(1,0)));\r\nprint(state.getPlayer(state.getTop(2,0)));*/\r\nprint(state.gameover());\r\nprint(state);"]}